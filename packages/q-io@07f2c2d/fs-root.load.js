montageDefine("07f2c2d","fs-root",{dependencies:["q","./fs-boot","./fs-common"],factory:function(e,t,n){function r(e,t){function n(n){var r;return r=e.isAbsolute(n)?e.relativeFromDirectory(e.ROOT,n):n,r=e.join(e.ROOT,r),r=e.relativeFromDirectory(e.ROOT,r),r=e.join(t,r),e.canonical(r).then(function(e){return e},function(){return r}).then(function(r){return e.contains(t,r)?{inner:e.join(e.ROOT,e.relativeFromDirectory(t,r)),outer:r}:i.reject("Can't find: "+JSON.stringify(n))})}function r(){return e.ROOT}var o=Object.create(a);return s.update(o,r),o.list=function(t){return n(t).then(function(t){return e.list(t.outer)}).then(null,function(){return i.reject("Can't list "+JSON.stringify(t))})},o.open=function(t,r,a){return n(t).then(function(t){return e.open(t.outer,r,a)}).then(null,function(){return i.reject("Can't open "+JSON.stringify(t))})},o.stat=function(t){return n(t).then(function(t){return e.stat(t.outer)}).then(null,function(){return i.reject("Can't stat "+JSON.stringify(t))})},o.statLink=function(t){return n(t).then(function(t){return e.statLink(t.outer)}).then(null,function(){return i.reject("Can't statLink "+JSON.stringify(t))})},o.canonical=function(e){return n(e).then(function(e){return e.inner}).then(null,function(){return i.reject("Can't find canonical of "+JSON.stringify(e))})},o.makeDirectory=function(t){return n(t).then(function(t){return e.makeDirectory(t.outer)}).catch(function(){throw Error("Can't make directory "+JSON.stringify(t))})},o.removeDirectory=function(t){return n(t).then(function(t){return e.removeDirectory(t.outer)}).catch(function(){throw Error("Can't remove directory "+JSON.stringify(t))})},o.remove=function(t){return n(t).then(function(t){return e.remove(t.outer)}).catch(function(){throw Error("Can't remove "+JSON.stringify(t))})},o.makeTree=function(t){return n(t).then(function(t){return e.makeTree(t.outer)}).catch(function(){throw Error("Can't make tree "+JSON.stringify(t))})},o.removeTree=function(t){return n(t).then(function(t){return e.removeTree(t.outer)}).catch(function(){throw Error("Can't remove tree "+JSON.stringify(t))})},i.when(e.canonical(t),function(e){return t=e,o})}var i=e("q"),a=e("./fs-boot"),s=e("./fs-common");n.exports=r}});