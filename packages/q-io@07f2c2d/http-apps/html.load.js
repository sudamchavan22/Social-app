montageDefine("07f2c2d","http-apps/html",{dependencies:["q"],factory:function(e,t){function n(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var r=e("q");t.HandleHtmlFragmentResponses=function(e,n){return n=n||t.handleHtmlFragmentResponse,function(t){return t.handleHtmlFragmentResponse=n,r.fcall(e,t).then(function(e){return e.htmlFragment?r.fcall(n,e):e})}},t.handleHtmlFragmentResponse=function(e){var t=e.htmlFragment;return delete e.htmlFragment,e.headers["content-type"]="text/html; charset=utf-8",e.body={forEach:function(r){r("<!doctype html>\n"),r("<html>\n"),r("    <head>\n"),void 0!==e.htmlTitle&&r("        <title>"+n(e.htmlTitle)+"</title>\n"),r("    </head>\n"),r("    <body>\n"),t.forEach(function(e){r("        "+e)}),r("    </body>\n"),r("</html>\n")}},e},t.escapeHtml=n}});