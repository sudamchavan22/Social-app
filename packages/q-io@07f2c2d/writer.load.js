montageDefine("07f2c2d","writer",{dependencies:["q"],factory:function(e,t,n){function r(e,t){var n=Object.create(r.prototype);t&&e.setEncoding&&e.setEncoding(t);var a=i.defer();return e.on("error",function(e){a.reject(e),a=i.defer()}),e.on("drain",function(){a.resolve(),a=i.defer()}),n.write=function(t){return e.writeable||e.writable?("string"!=typeof t&&(t=new Buffer(t)),e.write(t)?i.resolve():a.promise):i.reject(Error("Can't write to non-writable (possibly closed) stream"))},n.flush=function(){return a.promise},n.close=function(){var t;return o&&(t=i.defer(),e.on("finish",function(){t.resolve()}),e.on("error",function(e){t.reject(e)})),e.end(),a.resolve(),t?t.promise:i()},n.destroy=function(){return e.destroy(),a.resolve(),i.resolve()},n.node=e,i(n)}var i=e("q");n.exports=r;var a=process.versions.node.split("."),o=a[0]>=0&&a[1]>=10}});